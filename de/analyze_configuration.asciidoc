include::global_attr.adoc[]
= Konfiguration analysieren
// TK: Vielleicht besser (wenn auch etwas länglich): Konfiguration des {CMK}-Servers/der {CMK}-Instanz analysieren
:revdate: draft
:title: Die Konfiguration analysieren
:description: Prüfen Sie hiermit auf einfache Weise die Konfiguration des {CMK}-Servers Ihrer Instanz. Hierbei geht es nicht um eine inhaltliche Prüfung Ihres Monitorings sondern um die Optimierung der Umgebungsvoraussetzungen bezüglich Performance, Sicherheit, Prozessorauslastung, Benutzeranzahl usw..
// TK: description ist zu lang, max. 160 Zeichen
// TK: "Hierbei geht es nicht um eine inhaltliche Prüfung Ihres Monitorings": Das ist zuviel für die description, gehört in die Einleitung, ist aber eh zu schwammig formuliert.
// TK: description soll für sich selbst stehen, d.h. kein "hiermit". Das Keyword "Analyze configuration" muss mit rein.

{related-start}
xref:omd_https.html[Weboberfläche mit HTTPS absichern]
xref:intro_bestpractise.html[Best Practices, Tipps & Tricks]
xref:security.html[Sicherheit (Security)]
{related-end}
// TK: plus wato als Einstiegsartikel zur Konfiguration
// TK: omd_https kann meiner Meinung nach hier weg, ist ja eh in securiry verlinkt.

////
TK: Grundsätzliches:
- In der Einleitung fehlt mir die Einordnung und Abgrenzung zum Thema was hier analysiert wird: Die Konfiguration des {CMK}-Servers selbst und eben nicht z.B. die Konfiguration der überwachten Hosts und Services.
- Aber auch beim {CMK}-Server muss präzisiert werden: Was wird hier analysiert: der {CMK}-Server als ganzes oder die aktuelle Instanz des {CMK}-Servers, in der ich die Analyze configuration aufrufe? Ein Server kann mehrere Instanzen beherbergen, siehe omd_basics.
- In Kap. "2. Die Anzeige interpretieren" würde ich einen Eintrag rausziehen (mit Screenshot) und die GUI-Elemente erklären. Backup configured ist dabei ein gutes Beispiel. Ggf. auch einen Screenshot mit ausgeklappter Info.
- In Kap. "3. Die Umgebungsanalyse im Detail" ist die schnelle Zuordnung der GUI-Ergebnisse zu unseren Handbuch-Artikeln nicht möglich.
- In Kap. "4. Die Sicherheit des Systems steigern" würd ich mir schenken.
- Die Syntax aller xrefs ist nicht ok: keine .html Dateiendung, also: xref:cmc_differences#[bla] und xref:intro_finetune#ack[dieblub]
- Bitte kompletten Text mit Wörterbuch abgleichen, z.B. werden Server und Service immer mit Bindestrich gekoppelt.
////

== Einleitung
// TK: flott und gut geschrieben :-)

Wenn Ihre {CMK}-Instanz einmal eingerichtet und aufgebaut ist, kommen über 
// TK: aufgebaut würd ich streichen
// TK: Hier Thema Instanz vs. Server.
kurz oder lang Fragen auf: Geht das nicht schneller? Lässt 
sich das optimieren? Kann man das System sicherer machen?

Ein Ansatz zur Beantwortung dieser Fragen ist die Überprüfung und 
nachfolgende Optimierung der Serverumgebung. Je performanter Ihr 
System ist, um so schneller und effektiver arbeitet es auch. Je verlässlicher Sie Ihr System abgesichert haben, um so beruhigter können Sie damit arbeiten.

{CMK} analysiert schnell und übersichtlich die wesentlichen Umgebungsparameter und zeigt 
die Ergebnisse auf der Seite [.guihint]#Setup > Maintenance > Analyze configuration# an. 

Hinweis: Beim Aufruf von [.guihint]#Analyze configuration# wird stets der aktuelle Zustand aller Umgebungsvoraussetzungen geprüft und angezeigt. Daher kann es nach dem Aufruf der Funktion ein wenig dauern, bis die Seite mit den Ergebnissen angezeigt wird.
// TK: der Funktion > des Menüeintrags

image::analyze_config.png[alt="Übersicht der Konfigurationsanalyse"]
// TK: Die ganze Wahrheit zeigen mit allen Einträgen, damit man einen Eindruck bekommt, wieviel und was da alles gecheckt wird (ist Liste ist ja eh nicht so viel länger)

== Die Anzeige interpretieren

Die analysierten Serverdaten sind in verschiedene Gruppen unterteilt. Die farbigen xref:monitoring_basics.html#services[Servicezustände] liefern einen schnellen Überblick über den Gesamtzustand.
// TK: Diese Zustände sind nur an die Service-Zustände angelehnt, um die Wiedererkennbarkeit zu erhöhen (denk ich zumindest ;-)
// TK: Zur Erklärung taugt der Verweis also nur sehr bedingt. Ich denk mal, dass es nur OK, WARN, CRIT gibt. Eigentlich müssten die im Kontext der Analyze configuration erklärt werden.
// TK: Wäre wahrscheinlich auch hilfreich den Biestern in der Liste einen festen Namen zu geben: Prüfung? Check (wird es auch in der GUI genannt)? Test? Alles nicht so dolle. Du schwankst zwischen Parameter, Test, Prüfung, Analyse ...

Generell ist die Prüfung der Systemumgebung auf alle Parameter sinnvoll. Wollen Sie jedoch einzelne Tests nicht (erneut) durchführen lassen, zum Beispiel die Prüfung [.guihint]#Backup configured#, da in Ihrem Unternehmen eine andere Lösung zur Backup-Erstellung genutzt wird, so können Sie durch Klick auf den zugehörigen icon:button_disable_test[alt="Knopf zum Ausschalten eines Tests."]-Knopf jeden der Tests ausschalten.
// TK: Verschachtelung ist zu kompliziert: Zuerst das allgemeine, dann das Beispiel.

Ist eine der Analysen im Zustand {WARN} oder {CRIT}, so wird am rechten Ende der betreffenden Zeile ein icon:button_ackn_test[alt="Knopf zur Quittierung der Meldung."]-Knopf zur xref:intro_finetune.html#ack[Quittierung der Meldung] angezeigt.
// TK: Link geht ins Leere: falscher Artikel. Ins intro auch nur dann verlinken, wenn es keinen anderen (Haupt-)Artikel gibt. Hier gibt es einen: basics_ackn
// TK: Aber auch hier ist das Quittieren des Tests meiner Meinung nach wieder nur angelehnt an das Quittieren von Problemen.
// TK: Unmittelbare Wirkung ist, dass die Farbe gelb/rot verschwindet.
Im vorherigen Beispiel [.guihint]#Backup configured# bleibt dadurch zwar die Warnung in der Konfigurationsanalyse erhalten, aber es werden keine Benachrichtigungen mehr verschickt.
// TK: Ganz GROßES Fragezeichen: Werden aus der Analyze configuration wirklich Benachrichtigungen (notifications) generiert? Ich glaub das nicht.
// TK: Meine Interpretation: Quittierung des Tests macht nur die Farbe weg, damit man in der Übersicht nix rotes und gelbes mehr sieht. Das wäre aber zu klären...
 Ist die Quittierung deaktiviert, so wechselt der Knopf auf die Darstellung icon:button_unackn_test[alt="Knopf zur Rücknahme der Quittierung."]. Mit diesem Knopf heben Sie die Deaktivierung dann auch wieder auf.

== Die Umgebungsanalyse im Detail
// TK: Warum hier Umgebungsanalyse?
Zu jedem aufgeführten Analysepunkt erhalten Sie mit einem Klick auf den zugehörigen icon:button_info[alt="Knopf zum Einblenden weiterer Informationen."]-Knopf weitere Details zu den festgestellten Werten, eine Einschätzung des Status sowie Hinweise zur Optimierung. Vieles lässt sich damit bereits verstehen und bearbeiten.
Für die folgenden Themen bietet das Handbuch zusätzlich ergänzende Artikel:
// TK: Hier muss die GUI der Anker sein. Wenn ich ein WARN oder CRIT sehe, will ich genau zu diesem Thema etwas finden.
// TK: Vorschlag Tabelle mit Spalten Kategorie, Test, Weitere Informationen. Natürlich nur Einträge für Tests, zu denen im Handbuch was zu finden ist.
// TK: Bei Site connectivity könnte ein Link in distributed_monitoring#wan helfen. Zu Apache mal das Handbuch greppen und/oder Sebastian fragen.

* Standardmäßig sind in neuen Checkmk-Installationen die xref:notifications.html#rules[Benachrichtigungen per Regeln], die mit den [.guihint]#Deprecations# > [.guihint]#Flexible and plain email notifications# abgeprüft werden, bereits aktiviert. Anderenfalls aktivieren Sie diese über die [.guihint]#xref:wato.html[globalen Einstellungen]#.
// TK: Und wie heisst die globale Einstellung?

* Die xref:cmc_differences.html[Besonderheiten des CMC] befassen sich vor allem mit den Parametern [.guihint]#Performance# > [.guihint]#Check helper usage# / [.guihint]#Checkmk checker count# / xref:cmc_differences.html#fetcher_checker[[.guihint]#Checkmk checker usage# / [.guihint]#Checkmk fetcher usage#] / xref:cmc_differences.html#checkhelper[[.guihint]#Checkmk helper usage#].

* Die xref:ldap.html[Benutzerverwaltung mit LDAP/Active Directory] enthält Informationen zum Parameter [.guihint]#Performance# > [.guihint]#Number of users#.

* Die beiden Parameter [.guihint]#Reliability# > [.guihint]#Backups configured# und [.guihint]#Security# > [.guihint]#Encrypt backups# finden Sie im Handbuch-Artikel xref:backup.html[Backups].

* Zum Parameter [.guihint]#Security# > [.guihint]#Secure GUI (HTTP)# finden Sie im Handbuch ergänzende Informationen unter xref:security.html[Sicherheit (Security)].
// TK: Hierfür ist das richtige Linkziel omd_https. Dann kannst Du noch einen Satz anhängen, dass im Artikel security ein Überblick über sicherheitsrellevante Themen gegeben wird und machst damit das folgende Kapitel überflüssig.

== Die Sicherheit des Systems steigern
// TK: Das Kapitel kommt recht unvermittelt, hat nur teilweise was mit dem Thema zu tun und doppelt im wesentlichen den Inhalt von security.
// TK: Ich würd das hier einfach löschen.
Mit den Erkenntnissen aus der Konfigurationsanalyse können Sie aber nicht nur die Leistungsfähigkeit Ihres {CMK}-Servers optimieren. Auch die Sicherheit der Monitoringumgebung wird geprüft und kann verbessert werden.

Wenn Sie Checkmk sehr sicher betreiben wollen, empfehlen wir unbedingt die folgenden Punkte:

* Verwenden Sie xref:omd_https.html[HTTPS für die Weboberfläche].
* Bauen Sie xref:active_checks.html[Agentenverbindungen] entweder über SSH oder verschlüsselt auf.
* Nutzen Sie xref:ldap.html[LDAP] unbedingt in Kombination mit SSL.
* Verschlüsseln Sie Ihre Datensicherung.
* Sichern Sie auch den xref:livestatus.html[Livestatus] über ein xref:agent_deployment.html[Zertifikat] ab.
* Verwenden Sie HTTPS, wenn Sie den {CMK}-Server in einem xref:managing_docker.html[Docker-Container] installieren.

