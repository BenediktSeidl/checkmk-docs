= Die Konfiguration von Checkmk
:revdate: 2016-03-02
[.seealso][#cmk_commandline] [#wato_hosts] [#wato_rules]MT:WATO - Die (CMK) Konfigurationsoberfläche
MD:Checkmk ermöglicht die gesamte Basiskonfiguration direkt in der Weboberfläche. Dieser Artikel bietet einen ersten Einstieg in dieses wichtige Modul.

== Einleitung

image::bilder/watosnapin.png[align=left,right]

(CMK) unterscheidet zwischen der *Konfigurationsumgebung,* in der
Sie die Hosts, Services und Einstellungen verwalten, und dem eigentlichen
*Monitoring,* in der die operative Überwachung stattfindet.
<br><br>
Änderungen in der Konfiguration -- z.B. das Hinzufügen eines neuen Hosts --
haben zunächst keinen Einfluss auf das Monitoring.  Erst durch ein
[.guihints]#Activate Changes# werden alle Änderungen, die Sie seit dem letzten Mal
angesammelt haben, gleichzeitig aktiv. Vielleicht mag Ihnen das umständlich
erscheinen. Es hat aber den Vorteil, dass Sie eine komplexere Änderung erst
in Ruhe vorbereiten können, bevor diese produktiv geht. So kann es z.B. sein,
dass Sie nach dem Hinzufügen eines Hosts erst noch Schwellwerte setzen oder
manche Services entfernen möchten, bevor das Ganze „scharfgeschaltet“
werden soll.
<br><br>
Das Werkzeug für das Konfigurieren von (CMK) per GUI heißt [.guihints]#WATO}}# 
[.guihints]#(Web Administration Tool)}}.# WATO verwaltet alle Konfi&shy;gurationen in
handlichen Textdateien, welche erfahrene Benutzer auch von Hand
editieren oder sogar per Skript erzeugen können.
WATO erreichen Sie über das entsprechende Element in der Seitenleiste. Dieses
Element ist standardmäßig eingebunden und bietet direkten Zugriff auf alle
WATO-Module.
<br><br>
Wann immer Sie per WATO eine Änderung an der Monitoring-Konfiguration machen,
wird diese zunächst gesammelt und gilt als [.guihints]#pending}}.# Sie erkennen
solche Änderungen an dem Knopf ICON[button_2_changes.png] in den
WATO-Modulen bzw. an dem Knopf ICON[wato_changes.png] in der Seitenleiste.
Diese beiden Knöpfe bringen Sie zu einer Liste dieser Änderungen:

image::bilder/wato_pending_log.png[]

Durch Klick auf den Knopf [.guihints]#Activate Changes# wird nun aus Konfigurationsdateien von
WATO eine neue Konfiguration für den Monitoring-Kern erzeugt und diesem
der Befehl gegeben, diese ab sofort zu verwenden:

image::bilder/wato_activate_changes.png[align=center,width=400]

Die Liste der anstehenden Änderungen wird dadurch geleert. Diese Einträge sind aber
nicht verloren, sondern können über den Knopf [.guihints]#Audit Log# abgerufen werden. Dort
finden Sie eine Logdatei von allen Änderungen, die per WATO jemals gemacht wurden.


== Snapshots

Bis zu Version VERSION[1.2.8] wird WATO immer dann, wenn Sie
Änderungen aktivieren, automatisch eine Sicherung der Konfiguration
erstellen. Die Liste dieser Sicherungen erreichen Sie über das WATO-Modul
ICON[icon_backup.png] [.guihints]#Backup & Restore}}:# 

image::bilder/wato_snapshots.png[]

Ein Klick auf die ICON[icon_edit.png] Details eines Snaphots und dann auf
[.guihints]#Restore Snapshot# spielt diesen Konfigurationsstand wieder ein. *Wichtig*:
Es wird nur die Konfiguration zurückgespielt. Der Zustand und die Historie des
Monitorings werden davon nicht beeinflusst.

*Dieses Feature steht Ihnen ab Version VERSION[1.4.0* nicht mehr zur Verfügung, da es komplett überarbeitet wird.]


== Wichtige WATO-Module

WATO besitzt zahlreiche Module -- eines für jeden wichtigen Aspekt von (CMK).
Folgende Module sind besonders wichtig:

[cols=, options="header"]
|===


<th width="5%"></th>
|Modul|Aufgabe


|ICON[icon_home.png]
|{{Main Menu}}
|Auflistung aller WATO-Module mit kurzer Erklärung.


|ICON[icon_agents.png]|{{Monitoring Agents}}
|Hier finden Sie (CMK)-Agenten für Linux, Windows und andere Betriebsysteme.
In den (EE) können Sie die Agenten auch über WATO konfigurieren, paketieren und
automatisch updaten.


|ICON[icon_folder.png]
|{{Hosts}}
|Verwaltung der zu überwachenden Hosts -- das wohl wichtigste Modul.


|ICON[icon_configuration.png]
|{{Global Settings}}
|Globale Einstellungen -- also solche, die nicht bestimmte Hosts, Services oder
Benutzer betreffen.


|ICON[icon_rulesets.png]
|{{Host & Service Parameters}}
|Alle Einstellungen für bestimmte Hosts oder Services finden Sie hier. Die
Konfiguration geschieht [wato_rules|regelbasiert].

|===


== Quickaccess

Wenn Sie schon länger mit WATO arbeiten, werden Sie die Symbole im Menü auswendig
kennen. Dann empfiehlt sich die kleinere Variante des WATO-Menüs für die Seitenleiste:

image::bilder/wato_quickaccess.png[align=center,width=200]
