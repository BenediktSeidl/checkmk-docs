= Alarmierung per Slack (Notifications)
:revdate: draft
:title: Alarmierung per Slack
###MD:

== Funktion
Über den Messenger <a href="https://slack.com/">Slack</a> können Sie
Benachrichtigungen einfach über einen Webhook empfangen. Das funktioniert sowohl
auf selbst gehosteten oder gemieteten Servern, als auch über den kostenlosen
öffentlichen Slack-Dienst.

== Konfiguration Slack
Um Webhooks zu aktivieren und einen neuen Webhook zu erstellen, müssen Sie
zunächst eine Slack App erstellen. Melden Sie sich bei Slack an und erstellen
Sie einen _Workspace._ Gehen Sie dann wie folgt vor:

. Erstellen Sie über <a href="https://api.slack.com/messaging/webhooks">diesen Link</a> eine neue App über die Slack-API.
. Vergeben Sie einen beliebigen Namen und wählen Sie Ihren Workspace.
. Im nächsten Dialog wählen Sie als Funktion der App [.guihints]#Incoming Webhook.}}# 
. Aktivieren Sie anschließend Webhooks, indem Sie den Schalter auf [.guihints]#on# setzen.
. Erstellen Sie den Webhook über die Schaltfläche [.guihints]#Add New Webhook to Workspace.}}# 
. Legen Sie zum Abschluss den Channel (Gruppe) fest, in den die App posten soll, und bestätigen Sie die Rechteanfrage.

Zum Testen bekommen Sie nach Abschluss eine curl-Anweisung, die _Hello
World_ in den gewünschten Channel postet. Kopieren Sie die Webhook-URL und
wechseln Sie zu Checkmk.

== Konfiguration Checkmk
Die Konfiguration in Checkmk beschränkt sich auf die Angabe der Webhook-URL:

. Wählen Sie als [.guihints]#Notification Method# den Punkt [.guihints]#Slack or Mattermost.}}# 
. Geben die kopierte Webhook-URL an.

image::bilder/notifications_slack.png[]

Optional dürfen Sie URL-Präfixe angeben, um Links auf Ihre Checkmk-GUI innerhalb
der Benachrichtigung zu steuern. Statt die Webhook-URL hier direkt anzugeben,
können Sie ebenso den Passwortspeicher von WATO heranziehen und die URL aus
einem der Einträge auslesen.

Zum Testen können Sie die [commands|Kommandos] [.guihints]#Fake check results# und
[.guihints]#Custom notification# verwenden.
