[#import]
= Import von Hosts über CSV-Datei

Wenn Sie eine größere Anzahl von Hosts aus einem früheren Monitoringsystem
oder einer Excel-Tabelle übernehmen möchten, können Sie sich die Arbeit einfacher
machen, indem Sie Hosts mithilfe einer CSV-Datei importieren. {CMK} ist beim
Einlesen von CSV-Dateien recht flexibel. Im einfachsten Fall haben Sie schlicht eine
Datei, in der in jeder Zeile ein Hostname steht, der per DNS auflösbar ist:

.import.csv
[{file}]
----
myserver01
myserver02
myserver03
----

Es ist aber auch möglich, beim Import gleich weitere Attribute zu übernehmen.
Wenn die CSV-Datei in der ersten Zeile Namen der Attribute
enthält, kann {CMK} diese sogar automatisch zuordnen. Dabei versucht {CMK}
tolerant gegenüber einer genauen Schreibweise zu sein. In folgender Datei
kann WATO automatisch alle vier Spalten korrekt zuordnen:

.import.csv
[{file}]
----
hostname;ip address;alias;agent
srvlnx17;10.0.0.10;web99;cmk-agent
srvlnx18;10.0.0.32;Backupserver;cmk-agent
switch47-11;;Backpserver23;snmp-only
----

Das Vorgehen ist wie folgt: Wählen oder erstellen Sie einen Ordner, in den der
Import erfolgen soll. Wechseln Sie in diesen Ordner und klicken Sie auf icon:icon_bulk_import[].
Im folgenden Dialog laden Sie entweder die Datei hoch oder wählen [.guihint]#Content of CSV file# und
kopieren den Inhalt in das Feld, das nun erscheint.
Sie können auf den neu importierten Hosts sogleich eine automatische Serviceerkennung
ausführen lassen. Dafür sorgt die Option [.guihint]#Perform automatic service discovery#:

image::wato_bulk_import_step1.png[]

Die Auswahl eines Trennzeichens im nächsten Schritt ist hier nicht notwendig,
weil dieses automatisch erkannt wird. Wählen Sie die Option [.guihint]#Has title line#:

image::wato_bulk_import_step2.png[]

Ein Klick auf [.guihint]#Update preview# zeigt Ihnen nun folgende Tabelle:

[{image-border}]
image::wato_bulk_import_step3.png[]

Falls die automatische Erkennung einer Spalte nicht klappt, können Sie auch
manuell das Attribut auswählen, welches zugeordnet werden soll. Bei den Hostmerkmalen
muss in der CSV-Datei unbedingt der interne Name des Merkmals stehen (hier z.B. `cmk-agent`
und nicht [.guihint]#Check_MK Agent (Server)#). Wie die internen Namen genau lauten, können
Sie im WATO-Modul der icon:icon_hosttag[] Hostmerkmale nachsehen.

Falls Sie weiter oben die Option [.guihint]#Perform automatic service discovery#
gewählt haben, kommt nun noch die gleiche Maske, wie bei der
link:wato_services.html#bulk_discovery[[.guihint]#Bulk discovery#]. Nach Abschluss der
Erkennung fehlt nur noch das gewohnte [.guihint]#Activate Changes# und alle neuen
Hosts sind im Monitoring!