= Hostgruppen

== Wofür Hostgruppen?

Hostgruppen gehören zu den link:monitoring_basics.html[Grundlagen des Monitorings mit {CMK}].
Sie ermöglichen eine zweite Ebene der Gruppierung von Hosts
quer über die Ordnerstruktur. Dazu ein Beispiel: Sie haben über die Ordner
Ihre Standorte abgebildet. Nun wollen Sie aber alle Linux- oder bestimmte
Application-Server gemeinsam betrachten. Über eine Hostgruppe können Sie
dann entsprechende link:views.html[Ansichten] generieren, NagVis-Karten erstellen
sowie link:notifications.html[Alarmierungen] und link:alert_handlers.html[Alerthandler]
anpassen. Im Gegensatz zu link:wato_rules.html#hosttags[Hostmerkmalen] tauchen
Hostgruppen nicht als Auswahlkriterien in Regeln auf: Hostgruppen dienen
den Ansichten, Hostmerkmale der Konfiguration. Sie finden die Hostgruppen
unter [.guihint]#WATO => Host & Service Groups#:

[{image-border}]
image::hostgroups_list2.png[]


== Hostgruppen anlegen und editieren

Eine neue Hostgruppe legen Sie über icon:button_new_hostgroup[] an.
Das Anlegen ist trivial und beschränkt sich auf die Vergabe eines eindeutigen
Namens, welcher später nicht mehr geändert werden kann, sowie eines Alias:

image::hostgroups_config.png[]

Wie üblich müssen Sie die Änderungen anschließend noch über
[.guihint]#Activate Changes# aktivieren.


== Hosts in Hostgruppe aufnehmen

Um Hosts in Hostgruppen aufzunehmen, bemühen Sie den
link:wato_rules.html[Regelsatz] [.guihint]#Assignment of hosts to host groups#, den Sie
unter [.guihint]#WATO => Host & Service Parameters => Grouping# finden.  Legen Sie über
icon:button_create_rule_in_folder[] eine neue Regel im gewünschten Ordner
an. Zunächst bestimmen Sie im Bereich [.guihint]#Assignment of hosts to host groups#,
welcher Hostgruppe Hosts zugeordnet werden sollen; im Beispiel etwa der
Gruppe _myhostgroup_ beziehungsweise dessen Alias _My Host Group:_

image::hostgroups_rule_assignment.png[]

Anschließend kümmern Sie sich im Bereich [.guihint]#Conditions# um den oder
die Filter.  Sie können Hosts nach Hostmerkmalen und Ordner filtern oder
spezifische Hosts angeben. Filter lassen sich natürlich auch kombinieren,
um die Gruppe einzuschränken. Möchten Sie Hosts mit zwei Merkmalen aus ein
und derselben Merkmalsgruppe in die Hostgruppe aufnehmen, müssen Sie zwei
separate Regeln anlegen. Generell sind die Gruppenzuordnungen kumulativ. Hosts
können in mehreren Gruppen sein und Gruppen von mehreren Regeln gefüllt
werden. Sie können Hosts auch in Form von link:regexes.html[Regulären Ausdrücken]
angeben, um etwa alle Hosts mit _backup_ und ohne _testing_ im
Namen mit einem Eintrag zu erwischen.

image::hostgroups_rule_conditions.png[]


== Hostgruppen eines Hosts prüfen

Das Ergebnis Ihrer Zuordnungen können Sie auf der Statusseite eines Hosts
prüfen, die Sie über icon:button_host_status[] in den Hosteigenschaften
aufrufen. Hier finden Sie, standardmäßig weit unten, die Zeile
[.guihint]#Host groups the host is member of#:

[{image-border}]
image::hostgroups_host_status.png[]


== Hostgruppen einsetzen

Wie oben bereits erwähnt, können Sie Hostgruppen an drei Stellen einsetzen:
Es lassen sich link:views.html[Ansichten] erstellen, NagVis-Karten bauen und sie
lassen sich als Filter in Regeln für link:notifications.html[Benachrichtigungen] und
link:alert_handlers.html[Alerthandler] nutzen.  Wichtig ist dabei lediglich die Angabe
von [.guihint]#Hostgroups# als Datenquelle.  Im [.guihint]#Views#-Widget finden Sie freilich
auch fertige Ansichten, beispielsweise eine praktische Zusammenfassung:

[{image-border}]
image::hostgroups_view_summary.png[]

Über einen Klick auf die Namen der Hostgruppen gelangen Sie zur vollständigen
Ansicht der Hosts dieser Gruppe.

Bei der Nutzung in NagVis-Karten bekommen Sie als Ergebnis beispielsweise
Zusammenfassungen von Hostgruppen per Hover-Menü über ein einzelnes Icon:

image::grouping_hostgroup_nagvis.png[]

Wenn Sie Hostgruppen in link:notifications.html[Alarmierungen]
und link:alert_handlers.html[Alerthandlern] nutzen, stehen sie als
link:wato_rules.html#conditions[Bedingungen/Filter] zur Verfügung:

image::hostgroups_notifications_rule2.png[]