include::global_attr.adoc[]
= Lizenzen verwalten
:revdate: draft
:title: Lizenzen verwalten - Lizenzinformationen sammeln und übermitteln
:description: Hiermit sammeln Sie transparente Information über den aktuellen Lizenzstatus und versenden diese bei gleichzeitiger voller Kontrolle über die Datenübermittlung.
// TK: Gerne in der description das keyword Checkmk nutzen: In {CMK} sammeln Sie transparent Informationen über...

==  Einleitung

{cee-only} Nutzen Sie {CSE} oder {CME}, so führen Sie mindestens einmal pro Jahr einen Lizenzaudit durch, d.h. Sie erstellen eine Übersicht über die von Ihrem Unternehmen genutzten Lizenzen und geben diese an tribe29 oder den Sie betreuenden Partner von tribe29 weiter.
Diese Verwaltungsarbeit kann {CMK} Ihnen zwar nicht ganz abnehmen, aber dennoch erheblich erleichtern.
// TK: besser: Nutzen Sie die {CSE} oder die {CME} ...
// TK: Da Du ja bereits cee-only verwendest, reicht hier vielleicht auch: Nutzen Sie die {SE} oder die {ME} 

{CMK} sammelt jeden Tag zu einem zufälligen Zeitpunkt die aktuellen Service-Zahlen für alle verbundenen Instanzen. Diese werden dann in der Lizenzverwaltung übersichtlich und transparent dargestellt.

{CMK} speichert diese Informationen fortlaufend über einen Zeitraum von 400 Tagen, übermittelt diese aber niemals selbsttätig. Ältere Daten werden entfernt.

Als Administrator von {CMK} können Sie die Lizenzinformationen dann aktiv herunterladen und danach manuell in das Kundenportal von tribe29 hochladen. Alternativ können Sie diese ganz bequem direkt von {CMK} an das Kundenportal von tribe29 übermitteln lassen. In jedem Fall behalten Sie durchgängig die volle Kontrolle über die Datenweitergabe und die übermittelten Inhalte.

==  Nutzung der Lizenzverwaltung
// TK: Da haben wir zwar keine Regel für, ich mag aber lieber die verbbetonte als die substantivische Überschrift, da letztere oft etwas steif und offiziell daherkommt, also hier: Lizenzverwaltung nutzen. Aber: as you like...

[#einrichtung]
// TK: Bitte nur englische Anker verwenden. Die bleiben in beiden Sprachen identisch.
=== Eingabe der Subskriptionsdaten

Öffnen Sie als {CMK}-Benutzer mit xref:wato_user#[Administrator-Rechten] [guihint]#Setup > Maintenance > License usage#. Die Seite ist noch leer, so lange keine Subskiptionsdaten hinterlegt wurden.
// TK: vielleicht besser als Link-Ziel wato_user#roles?

image::license_license_usage_ausschnitt.png[alt="Auswahl Edit subscription settings"]
// TK: In dem Screenshot stößt das Hilite an den linken Rand. Besser etwas Luft nach links lassen (nächstes Mal ;-)
// TK: Alt-Text: alt="Aktionsknopf zum Öffnen der Seite mit den Subskriptionseinstellungen."
// TK: Alt-Text: Und immer Punkt am Ende wg. kurzer Pause des Screenreaders.

Öffnen Sie mit dem Knopf [guihint]#Edit subscription settings# die gleichnamige Seite:

image::license_edit_subscription.png[alt="Formular zur Eingabe der Subskriptionseinstellungen."]

Tragen Sie nun Beginn und Ende Ihres aktuellen Abonnementzeitraums in die entsprechenden Felder im Abschnitt [guihint]#Subscription details# ein. Darunter wählen Sie eine der vorgegebenen Abonnementgrößen aus. Alternativ können Sie mit der Auswahl [guihint]#Custom limit# einen eigenen Wert eingeben, wenn der für Ihre Umgebung zutreffende Wert nicht angeboten wird.

Wollen Sie die Direktübermittlung der Lizenzinformationen nutzen, so füllen Sie ergänzend den zweiten Abschnitt [guihint]#Customer portal credentials# mit Ihrem Benutzernamen sowie Passwort für das link:https://customer.checkmk.com/[{CMK}-Kundenportal^].
// TK: Direktübermittlung: evtl. Link nach unten einfügen

=== Angezeigte Lizenzinformationen

{CMK} beginnt dann, die lizenzrelevanten Informationen aufzuzeichnen und in Form eines farbigen Diagramms anzuzeigen.
// TK: Beginnt CMK erst jetzt mit der Aufzeichnung? d.h. "{CMK} sammelt jeden Tag zu einem zufälligen Zeitpunkt die aktuellen Service-Zahlen" von oben beginnt erst jetzt? Das ist (wie ich finde) eine interessante Information.
// TK: Dann solltest Du auch kurz erwähnen, dass das folgende Bild aus einer CMK-Instanz stammt, in der die Daten bereits länger verfügbar sind.

image::license_usage.png[alt="Übersicht über die aktuelle Lizenznutzung."]

Anhand der verschiedenfarbigen Elemente können Sie Folgendes ablesen:

* Die rote Linie zeigt das aktuell in den [guihint]#xref:einrichtung[Subscription details]# eingetragene Lizenzlimit. Damit sind Überschreitungen der Services-Anzahl leicht zu erkennen.
* Die hellblaue Linie zeigt die durchschnittliche Servicezahl pro Monat an. Hierdurch werden Spitzen, die z.B. durch eine Fehlkonfiguration entstehen, geglättet.
* Die dunkelblaue Linie zeigt für jeden Tag die Gesamtzahl der
überwachten Services über alle verbundenen Instanzen hinweg an.
* Die grüne Spalte zeigt die durchschnittliche Anzahl an Services im aktuellen Monat.
* Die gelbe Spalte zeigt den ersten Monat, in dem die bezahlte Subskriptionsgröße überschritten wird.
// TK: die bezahlte Subskriptionsgröße überschritten wird > das Lizenzlimit überschritten wurde.
* Die lila Spalte zeigt den Monat mit der höchsten Lizenzüberschreitung.
// TK: Doofe Frage: Wenn erster = höchster, dann wird lila und gelb gemischt? Oder gestreift?
In der Tabelle unterhalb der Grafik sind die Instanzen der aktuellsten Lizenzerhebung einzeln aufgelistet.
// TK: In einer Tabelle unterhalb der Grafik, die im obigen Bild nicht zu sehen ist, sind ...

== Übermittlung der Lizenzinformationen an tribe29
Als Benutzer von {CSE} oder {CME} können Sie Ihre Lizenzinformationen (die Angaben, die Sie auf den Seiten [guihint]#License usage# und [guihint]#Edit subscription settings# sehen sowie einen auf der Seite [guihint]#Submit or download license usage report# ergänzten Kommentar) entweder manuell übermitteln oder Sie lassen {CMK} den Großteil der Arbeit übernehmen.
// TK: wie oben: Als Benutzer der {CSE} oder der {CME} ...
// TK: Satz ist zu lang. Klammer auflösen.
// TK: oder Sie lassen {CMK} den Großteil der Arbeit übernehmen > oder von {CMK} übermitteln lassen.

=== Manuelle Übermittlung
Ihre Lizenzinformationen sind für Sie jederzeit transparent einsehbar und sie können diese ganz einfach herunterladen und manuell in das tribe29-link:https://customer.checkmk.com/[Kundenportal] hochladen.
// TK: Den ersten Teil des Satzes könntest Du vor die Überschrift ziehen und mit der dortigen Klammerinformation verheiraten.
// TK: Hier braucht es keinen Link zum Kundenportal
// TK: Im Linksourcetext fehlt das ^ am Ende, wie auch in den restlichen Links zum Portal.

Öffnen Sie dazu [guihint]#Setup > Maintenance > License usage#. Klicken Sie dann auf den Knopf icon:icon_assume_0[alt="Grüner Kreis mit Haken."] [guihint]#Submit or download.#
// TK: Alt-Text: Uff, über die Alt-Texte für Icons sollten wir nochmal reden. Ich meine, die Funktion sollte beschrieben werden und nicht das Bild (das sich ja auch ändern kann), also eher: alt"Symbol zur Bestätigung der Eingabe." Würde einen Sehbehinderten interessieren, wie das Icon gemalt ist? Ich glaube nicht - bin aber auch nicht in der Zielgruppe.

image::license_license_usage_ausschnitt2.png[alt="Auswahl Submit or download."]

Sie gelangen auf die Seite [guihint]#Submit or download license usage report#.

image::license_submit_or_download.png[alt="Seite für Übertragung und Download der Lizenzinformationen."]

Mit dem Knopf icon:icon_download[alt="Grüner Kreis mit Haken."] [guihint]#Download report# starten Sie, nach der Festlegung des gewünschten Pfades, den Download des gz-Archivs (Tar-Archiv). Darin enthalten ist eine json-Datei, bestehend aus der Version (VERSION), einer Liste (history) und den Details zu der Subskription als Dictionary. Letzteres enthält die Informationen zu den einzelnen Datenpunkten.
// TK: Dateitypen eher groß als kleinschreiben (JSON).
// TK: Ich weiß, dass ich was über den Inhalt lesen wollte - und jetzt rudere ich zurück, sorry:
// TK: VERSION würde ich weglassen, weil da nicht die CMK-Version drinsteht (wie man vermuten könnte) sondern nur 1.1, was wahrscheinlich die Version des SW-Moduls ist.
// TK: Vielleicht so: Darin enthalten ist eine JSON-Datei mit allen Lizenzinformationen, die Ihnen auch auf der Seite License usage angezeigt werden.

Verlassen Sie nun {CMK} und wechseln Sie zum link:https://customer.checkmk.com/[tribe29-Kundenportal]. Loggen Sie sich dort mit Ihren Zugangsdaten ein, um die Lizenzinformationen hoch zu laden. Wählen Sie dazu [guihint]#License Audit# im Menü der linken Seitenleiste.
// TK: im Menü der linken Seitenleiste > in der linken Seitenleiste. Die Seitenleiste zeigt ja schon die Einträge, ohne dass ich ein Menü öffnen müsste.

image::license_license_audit.png[width=35% alt="Linkes Seitenmenü im Kundenportal."]
//TK: Alt-Text wird nicht angezeigt weil Syntax falsch (weiter unten nochmal): Bin mir nicht sicher, was alles funktioniert und was nicht, aber so geht es auf jeden Fall: [alt="Linkes Seitenmenü im Kundenportal.",width=35%]

Es öffnet sich das Fenster [guihint]#License Audit Upload#, in das Sie die Datei mit den Lizenzinformationen über Drag & Drop (Ziehen & Fallenlassen) in das graue Feld hochladen. Alternativ klicken Sie in dieses Feld, um ein Browser-Fenster für die Auswahl der Datei zu öffnen.

image::license_audit_upload_customer.png[alt="Seite zur Übermittlung der Lizenzinformationen."]

Geben Sie Ihr Passwort ein und starten Sie die Übertragung der Datei mit einem Klick auf den Knopf [guihint]#Upload license audit#. Das erfolgreiche Hochladen wird abschließend bestätigt.

[#direktübermittlung]
=== Direktübermittlung durch {CMK}
Um sich die Arbeit noch weiter zu vereinfachen, können Sie die Übermittlung der Lizenzinformationen vordefinieren. Sie ist dann mit wenigen Klicks direkt aus {CMK} heraus durchführbar.

*Hinweis:* Ihre Zugangsdaten für das link:https://customer.checkmk.com/[Kundenportal] müssen vor der ersten Übertragung in {CMK} hinterlegt worden sein (siehe xref:einrichtung[Einrichtung der Lizenzverwaltung]).
// TK: Auch hier würde ich den Link zum Kundenportal weglassen.

Nutzen Sie auf der Seite [guihint]#Submit or download license usage report# den Knopf icon:icon_assume_0[alt="Grüner Kreis mit Haken."] [guihint]#Submit report.# Ihre Lizenzinformationen werden dann direkt in Ihren Bereich des tribe29-Kundenportals übertragen und Sie erhalten eine entsprechende Bestätigung.
// TK: Hier ergänzen, dass die gleichen Informationen (gleiche Datei) übertragen wird wie bei der manuellen Übermittlung (hoffentlich stimmt das ;-)

image::license_submit_license_success.png[alt="Bestätigung der erfolgreichen Lizenzdaten-Übermittlung"]

=== Ergänzende Informationen für tribe29-Partner
Als Partner von tribe29 können Sie nicht nur Ihre eigenen Lizenzinformationen einfach und schnell an tribe29 melden, sondern ebenso einfach auch die Lizenzinformationen Ihrer Kunden entweder manuell aus {CMK} herunterladen und dann in das Partnerportal von tribe29 hochladen.
Oder Sie lassen {CMK} auch hierbei den Großteil der Arbeit erledigen.
Die xref:direktübermittlung[Direktübermittlung durch {CMK}] der kundenbezogenen Informationen entspricht exakt dem oben beschriebenen Vorgehen. Lediglich bei der manuellen Übermittlung gibt es kleine Unterschiede.
// TK: 1x "einfach" reicht. Wir neigen dazu, alles mögliche als total einfach zu bezeichnen. Find ich nicht so gut, weil: Wenn ich das nicht raffe (obwohl es doch so easy ist), dann bin ich wohl zu doof für CMK...
// TK: Partnerportal würde ich auch weglassen. Es gibt ja offensichtlich nur ein Portal, in dem die Partner mehr sehen als die Nicht-Partner. Partnerportal gibt es unten nochmal als Alt-Text.
// TK: Ich finde den ganzen Absatz etwas unübersichtlich. Vielleicht so: 
////
Als Partner von tribe29 können Sie nicht nur Ihre eigenen Lizenzinformationen einfach und schnell an tribe29 melden, sondern ebenso die Lizenzinformationen Ihrer Kunden.
Die xref:direktübermittlung[Direktübermittlung durch {CMK}] der kundenbezogenen Informationen entspricht exakt dem oben beschriebenen Vorgehen. Lediglich bei der manuellen Übermittlung gibt es kleine Unterschiede.
////

Wenn Sie einen direkten Zugang zu {CMK} bei Ihrem Kunden haben, erstellen Sie den Lizenzbericht analog zu dem oben für alle Benutzer beschriebenen Vorgehen.
// TK: Lizenzbericht? Hatten wir noch nicht. > Datei mit den Lizenzinformationen oder Lizenzinformationsdatei ...

Haben Sie keinen direkten Zugang zu {CMK} bei Ihrem Kunden, so bitten Sie diesen, den Download für Sie durchzuführen und lassen Sie sich die Datei zuschicken.

Loggen Sie sich danach mit Ihren Zugangsdaten in das tribe29-link:https://customer.checkmk.com/[Kundenportal] ein (tribe29-Partnern stehen hier zusätzliche Optionen zur Verfügung). Wählen Sie [guihint]#Resold Licenses# im Menü der linken Seitenleiste.

image::license_resold_licenses.png[width=35% alt="Linkes Seitenmenü im Partnerportal."]
// TK: Wolltest Du da nicht ein paar Spalten wegschneiden? Etwa von Partner price bis Procured?

Es öffnet sich das Fenster [guihint]#Resold Licenses#.

image::license_resold_licenses_rechts.png[alt="Ansicht aller zugehörigen Endkundenlizenzen im Partnerportal."]

Klicken Sie in der Zeile des betreffenden {CMK}-Benutzers auf den Knopf icon:button_upload_audit[alt="Wolke mit Pfeil."].
// TK: {CMK}-Benutzer > Kunden?
Analog zum Vorgehen für alle Benutzer laden Sie die Datei mit den Lizenzinformationen entweder über Drag & Drop (Ziehen & Fallenlassen) in das graue Feld hoch oder klicken Sie in dieses Feld, um einen Browser für die Auswahl der Datei zu öffnen.
// TK: Benutzer > Kunden?
// TK: Hier würde ich nochmal straffen: Analog zum Vorgehen für alle Kunden laden Sie die Datei mit den Lizenzinformationen über das Fenster  License Audit Upload hoch.

image::license_audit_upload.png[alt="Ansicht aller zugehörigen Endkundenlizenzen im Partnerportal."]
// TK: Copy & Paste Alt-Text?

Starten Sie das Hochladen der Datei mit einem Klick auf den Knopf [guihint]#Upload license audit#. Das erfolgreiche Hochladen wird abschließend bestätigt.
