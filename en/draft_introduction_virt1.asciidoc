###2. Installation
###
###introduction_virt1:
###Komplette Installationsanleitung für VirtualBox und ESXi ab Punkt 1.2.
###(mit Hervorhebung der Netzwerkkarten-Einstellungen, neuen Bildern,
###Überschriften).
###
###1.3 und 1.4 fallen raus, da bereits in appliance_usage vorhanden und für
###alle Systeme identisch.
#########2.0 wird in update verlagert.
#########
#########update:
#########Umbenennen nach "Updates und Upgrades" und
#########Upgrade-Kapitel aus introduction_virt1 einbauen.
###
###
###7. Checkmk Appliance
###
###Schnellstart-Anleitung mit Head und ein, zwei Sätzen Einleitung aufräumen.
###
###cma_virt1_basic_virtualbox und cma_virt1_basic_esx werden gelöscht.
###

= Installation der virtuellen Appliance
:revdate: 2017-02-02
[.seealso][#introduction] [# check_mk_getting_started]:title: Checkmk in der Appliance nutzen
:description: Mit der offiziellen Appliance wird die Einrichtung von checkmk noch einfacher. Die Installation erfolgt mit wenigen Klicks bequem über ein Webinterface.

== Die virtuelle Appliance

Mit der virtuellen Appliance _Checkmk virt1_ können Sie Checkmk als
Gast auf einer Virtualisierungsplattform wie VMware betreiben.
Auch VirtualBox wird unterstützt und eignet sich besonders gut zum
Ausprobieren.

In der Appliance sind Betriebssystem und Checkmk selbst bereits vorinstalliert. Sie ist
sofort einsatzbereit, wird dialoggestützt eingerichtet und über eine eigene Weboberfläche
konfiguriert. Sie benötigen daher keine Linux-Kenntnisse. Ausgeliefert wird die
Appliance im Open Virtualization Format (OVF), genauer in dessen Archivformat OVA
(Open Virtualization Archive). 

== Download der Appliance

Laden Sie von der <a href="appliance-download.php">Appliance-Download-Seite</a>
die OVA-Datei in der jeweils neuesten Version herunter. Dazu benötigen Sie
eine gültige <a href="subscription.php?">Subskription</a> mit der
virt1-Option. Alternativ können Sie zum Ausprobieren die _Demo-Version_
verwenden (_Checkmk virt1 (Demo)_). Diese ist kostenlos und enthält
eine Demo-Version von Checkmk. Die Größe der OVA-Datei liegt bei etwa 750 MB.

== Installation unter VirtualBox

=== Voraussetzungen
Für die folgenden Schritte benötigen Sie die OVA-Datei sowie eine laufende VirtualBox-Installation.
Auf welchem System VirtualBox läuft spielt dabei keine Rolle. 

=== Import der Appliance
Starten Sie den Import der OVA-Datei über [.guihints]#File => Import Appliance.# Sie sehen umgehend
alle Einstellungen der virtuellen Maschine -- und können diese auch so belassen. Freilich
können Sie an diesem Punkt oder nachträglich Werte ändern, um der Maschine etwa weitere
Ressourcen zuzuschreiben.

*Wichtig:* Unter den Appliance-Einstellungen sollten Sie unter [.guihints]#Mac Address Policy}}# 
dringend die Option [.guihints]#Generate new MAC addresses for all network adapters# wählen. Andernfalls
wird es zu Problemen kommen, wenn mehrere Appliances mit derselben MAC-Adresse im Netzwerk
laufen.

image::bilder/virt1_virtualbox_import.png[align=border]

Sie können die Appliance nun importieren.

Nach dem Import müssen Sie noch einen weiteren Schritt durchführen: Rufen Sie die Netzwerk-Konfiguration
der VM auf. Der Modus ist hier auf [.guihints]#Bridged Adapter# gesetzt: Der virtuelle Netzwerkadapter
wird dabei mit einem Adapter auf Ihrem Host verbunden -- und die variieren natürlich. Im Zweifelsfall
verlassen Sie die Konfiguration einfach ohne Änderung über [.guihints]#OK# -- VirtualBox ergänzt den
fehlenden Adapternamen dann automatisch mit Ihrem Standardadapter.

image::bilder/virt1_virtualbox_network.png[]




 Damit ist der
VirtualBox-spezifische Teil abgeschlossen und Sie können mit der [appliance_usage|Grundkonfiguration] Ihrer Appliance fortfahren.

### Wählen Sie In der VirtualBox-Oberfläche das Menü [.guihints]#Datei# und wählen Sie aus diesem
### Menü den Punkt [.guihints]#Appliance importieren &#8230;}}# 
### 
### BI:cma_de_virt1_virtualbox_2.png center width:457
### 
### Daraufhin öffnet sich der Dialog zum Importieren von Appliances. Klicken Sie nun auf das Ordner-Symbol.
### 
### BI:cma_de_virt1_virtualbox_3.png center width:457
### 
### Wählen Sie hier nun die heruntergeladene OVA-Datei der Checkmk-Appliance von Ihrer Festplatte
### und bestätigen Sie den Dialog mit [.guihints]#Öffnen.}}# 
### 
### BI:cma_de_virt1_virtualbox_4.png center width:457
### 
### Zurück im vorherigen Dialog, bestätigen Sie erneut Ihre Auswahl mit [.guihints]#Weiter &gt;}}# 
### 
### BI:cma_de_virt1_virtualbox_5.png center width:457

### H2:Optionale Einstellungen
### 
### Der folgende Dialog zeigt Ihnen nun Detailinformationen zu der Appliance an. Hier
### können Sie die Standardeinstellungen, z.B. Menge des Arbeitsspeichers oder Anzahl der CPUs, einsehen
### und auch ändern. Die Appliance wird so ausgeliefert, dass 4 Gigabyte Arbeitsspeicher und 2 CPU-Kerne
### vorkonfiguriert sind.
### 
### *Wichtig: *Wir empfehlen, den Haken bei
### [.guihints]#Zuweisen neuer MAC-Adressen für alle Netzwerkkarten# zu setzen, damit es
### bei mehrfacher Verwendung von Checkmk-virt1-Appliances keine Konflikte gibt.
### 
### BI:cma_de_virt1_virtualbox_6.png center width:457
### 
### Wenn nun alle Einstellungen stimmen, starten Sie den Importvorgang mit [.guihints]#Importieren.# Es öffnet sich ein Dialog, der den Fortschritt des Importvorgangs anzeigt.
### 
### BI:cma_de_virt1_virtualbox_7.png center width:457
### 
### Nach erfolgreichem Import finden Sie im Hauptfenster von VirtualBox in der linken Liste einen neuen
### Eintrag [.guihints]#Checkmk virt1.# Markieren Sie diesen und drücken Sie oben in der Aktionsleiste auf
### [.guihints]#Starten,# um die Checkmk virt1 zu starten.
### 
### BI:cma_de_virt1_virtualbox_8.png center width:457
### 
### Daraufhin öffnet sich ein Fenster, das die Bildschirmausgabe der Checkmk virt1 zeigt. Damit haben
### Sie die VirtualBox-spezifischen Schritte abgeschlossen und können mit der
### [appliance_usage|Grundkonfiguration] Ihrer Appliance fortfahren.

== Installation unter ESXi

=== Voraussetzungen

Voraussetzungen für die folgende Anleitung: Sie haben bereits einen ESXi-Server
im Netzwerk laufen und darin einen _Datenspeicher_ für die Konfigurationen der
virtuellen Maschinen eingerichtet.
Zudem benötigen Sie die OVA-Datei der Appliance als Demo- oder Vollversion.

=== Import der Appliance

Der Import der Appliance läuft weitgehend automatisch, lediglich im Anschluss
sollten Sie noch einen Blick auf die Netzwerkkonfiguration werfen.

. Wählen Sie in der ESXi-Hauptnavigation den Punkt [.guihints]#Virtual Machines}}.# 
. Starten Sie den Importassistenten über [.guihints]#Create/Register VM}}.# 
. Wählen Sie den Import via OVA/OVF.
. Fügen Sie die OVA-Datei so wie heruntergeladen hinzu.
. Klicken Sie sich weiter durch den Assistenten, ohne weitere Änderungen vorzunehmen.

Folgend wird die neue Maschine bereitgestellt, was einige Minuten dauern kann. 

image::bilder/virt1_esxi_import.png[]

*Wichtig: *Die Checkmk virt1 wird mit einem Netzwerk-Interface vom Typ
_E1000_ ausgeliefert, einer Emulation des 1-GB-Netzwerkadapters
_Intel 82545EM Gigabit Ethernet NIC,_ für den in der Regel bereits
Treiber bereitstehen. Auf einem ESXi-Server sollten Sie die Karte für eine bessere
Performance gegen eine Karte vom Typ _VMXNET 3_ austauschen, ein komplett
virtualisiertes 10-GB-Interface. Installieren Sie dazu die VMWare Tools und
ändern Sie die Einstellung unter [.guihints]#virt1 => Edit => Network Adapter 1 => AdapterType.}}# 

image::bilder/virt1_esxi_network.png[]

Damit haben Sie die VMWare-ESXi-spezifischen Schritte abgeschlossen und können mit der
[appliance_usage|Grundkonfiguration] Ihrer Appliance fortfahren.

### Die Anleitung setzt voraus, dass Sie auf
### einem Server in Ihrem Netzwerk bereits VMWare ESXi und auf Ihrem Computer den VMWare
### vSphere Client installiert und gestartet haben. Ab ESXi 6.5 müssen Sie auf den Web-Client
### ausweichen, da die Desktop-Version eingestellt wurde.
### 
### H2:Import der Appliance
### 
### Wählen Sie in Oberfläche des vSphere Clients zunächst das Menü [.guihints]#Datei# und daraus
### den Punkt [.guihints]#OVF-Vorlage bereitstellen&#8230;}}# 
### 
### BI:cma_de_virt1_esx1.png center width:457
### 
### Daraufhin öffnet sich der Dialog zum Importieren von Appliances. Klicken Sie
### nun auf die Schaltfläche [.guihints]#Durchsuchen&#8230;# und wählen Sie die vorher heruntergeladene
### OVA-Datei von Ihrer Festplatte.
### 
### BI:cma_de_virt1_esx2.png center width:457
### 
### Bestätigen Sie die Auswahl mit [.guihints]#Weiter &gt;.# Jetzt wird Ihnen ein Dialog mit
### Details zu der ausgewählten Appliance angezeigt. In diesem Fall wird die
### _Checkmk virt1_ in der Version _1.0.1_ importiert.
### 
### BI:cma_de_virt1_esx3.png center width:457
### 
### Fahren Sie mit [.guihints]#Weiter &gt;# fort. Im folgenden Dialog können Sie die Standardbezeichnung
### der Appliance anpassen. Mit diesem Namen erscheint die Appliance nach dem Import in Ihrer
### vSphere-Oberfläche.
### 
### BI:cma_de_virt1_esx4.png center width:457
### 
### Wenn Sie den gewünschten Namen eingegeben haben, bestätigen Sie mit [.guihints]#Weiter &gt;.# 
### 
### H2:Optionale Einstellungen
### 
### In den folgenden Dialogen können Sie nun die Ressourcen der Appliance einsehen
### und anpassen; und beispielsweise den vorgegebenen Arbeitsspeicher von 4 Gigabyte
### oder die 2 gesetzten CPU-Kerne erweitern.
### 
### *Wichtig:* Die Checkmk virt1 wird mit einem virtuellen Netzwerkinterface vom Typ
### _Intel PRO/1000 MT Server (82545EM)_ ausgeliefert, da dieses mit den gängigsten
### Virtualisierungslösungen kompatibel ist. Auf einem ESXi-Server empfiehlt es sich,
### zugunsten einer verbesserten Performance den Typ der Netzwerkkarte auf
### _VMXNET 3_ zu wechseln.
### 
### Zum Abschluss wird Ihnen noch ein Bestätigungsdialog mit allen soeben eingebenen
### Details angezeigt. Sie können unterhalb des Textfelds einen Haken setzen, wenn
### Sie die _Checkmk virt1_ direkt nach dem Import starten wollen.
### Wenn alle Daten stimmen, bestätigen Sie den Import mit [.guihints]#Beenden.}}# 
### 
### BI:cma_de_virt1_esx5.png center width:457
### 
### Nun läuft die Bereitstellung der _Checkmk virt1_. Dies kann, je nach
### Netzwerkverbindung zwischen Ihrem Computer und dem ESXi-Server, einige Minuten dauern.
### 
### BI:cma_de_virt1_esx6.png center width:457
### 
### Nach Abschluss des Imports können Sie die _Checkmk virt1_ in der
### vSphere-Oberfläche auswählen und starten.
### 
### BI:cma_de_virt1_esx7.png center width:457

